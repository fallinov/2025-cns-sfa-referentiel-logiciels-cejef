# Configuration ESLint - R√©f√©rentiel Logiciels CEJEF

Ce document explique les r√®gles ESLint configur√©es pour ce projet.

## üìã R√®gles principales

### Style de code (Stylistic)

#### Guillemets
- **R√®gle** : Guillemets doubles `"` obligatoires
- **Raison** : Coh√©rence avec le code TypeScript existant
```typescript
// ‚úÖ Correct
const name = "Kahoot!"
const description = "Plateforme de quiz"

// ‚ùå Incorrect
const name = 'Kahoot!'
```

#### Virgules finales (Trailing commas)
- **R√®gle** : Pas de virgules finales
- **Raison** : Style d√©fini dans `nuxt.config.ts`
```typescript
// ‚úÖ Correct
const array = [1, 2, 3]
const obj = { a: 1, b: 2 }

// ‚ùå Incorrect
const array = [1, 2, 3,]
const obj = { a: 1, b: 2, }
```

#### Point-virgules
- **R√®gle** : Pas de point-virgules
- **Raison** : Style moderne JavaScript/TypeScript
```typescript
// ‚úÖ Correct
const x = 10
const y = 20

// ‚ùå Incorrect
const x = 10;
const y = 20;
```

#### Style d'accolades (Brace Style)
- **R√®gle** : One True Brace Style (1tbs)
- **Raison** : Standard d√©fini dans le projet
```typescript
// ‚úÖ Correct
if (condition) {
  doSomething()
} else {
  doSomethingElse()
}

// ‚ùå Incorrect
if (condition)
{
  doSomething()
}
else
{
  doSomethingElse()
}
```

#### Indentation
- **R√®gle** : 2 espaces
- **Raison** : Standard pour Vue.js et Nuxt
```typescript
// ‚úÖ Correct
function example() {
  if (true) {
    return "ok"
  }
}

// ‚ùå Incorrect (4 espaces)
function example() {
    if (true) {
        return "ok"
    }
}
```

#### Espaces
```typescript
// ‚úÖ Correct
const obj = { a: 1, b: 2 }
const result = a + b
if (condition) { }

// ‚ùå Incorrect
const obj = {a:1,b:2}
const result = a+b
if(condition){ }
```

### R√®gles Vue.js

#### Ordre des attributs
Les attributs doivent suivre cet ordre :
1. D√©finition (`is`, `v-is`)
2. Rendu de liste (`v-for`)
3. Conditionnels (`v-if`, `v-else-if`, `v-else`, `v-show`)
4. Modificateurs de rendu (`v-once`, `v-pre`)
5. Globaux (`id`)
6. Uniques (`ref`, `key`)
7. Slots (`v-slot`, `slot`)
8. Bindings bidirectionnels (`v-model`)
9. Autres directives (`v-custom-directive`)
10. Autres attributs (`custom-prop="foo"`)
11. √âv√©nements (`@click`, `v-on`)
12. Contenu (`v-html`, `v-text`)

```vue
<!-- ‚úÖ Correct -->
<UCard
  v-if="show"
  id="card-1"
  ref="cardRef"
  v-model:open="isOpen"
  class="hover:shadow-lg"
  @click="handleClick"
>
  Content
</UCard>

<!-- ‚ùå Incorrect (ordre invers√©) -->
<UCard
  @click="handleClick"
  class="hover:shadow-lg"
  v-model:open="isOpen"
  id="card-1"
  v-if="show"
>
  Content
</UCard>
```

#### Auto-fermeture des composants
```vue
<!-- ‚úÖ Correct -->
<div class="container"></div>
<UIcon name="i-lucide-check" />
<img src="logo.png" />

<!-- ‚ùå Incorrect -->
<div class="container" />
<UIcon name="i-lucide-check"></UIcon>
<img src="logo.png">
```

#### Indentation dans les templates
```vue
<template>
  <div>
    <h1>Titre</h1>
    <p>Paragraphe</p>
  </div>
</template>
```

#### Attributs par ligne
- Maximum 3 attributs sur une seule ligne
- 1 attribut par ligne en mode multiligne

```vue
<!-- ‚úÖ Correct (3 attributs max) -->
<UBadge color="success" variant="soft" size="xs">
  CEJEF
</UBadge>

<!-- ‚úÖ Correct (multiligne, 1 par ligne) -->
<UCard
  class="hover:shadow-lg"
  :ui="cardConfig"
  @click="handleClick"
>
  Content
</UCard>

<!-- ‚ùå Incorrect (trop d'attributs sur une ligne) -->
<UBadge color="success" variant="soft" size="xs" class="mb-2">
  CEJEF
</UBadge>
```

#### Noms de composants multi-mots
- **R√®gle** : D√©sactiv√©e pour `app.vue` et les pages
- **Raison** : Nuxt utilise des noms simples pour ces fichiers sp√©ciaux

### R√®gles TypeScript

#### D√©finition de types
```typescript
// ‚úÖ Correct (interface pr√©f√©r√©e)
interface Software {
  id: string
  name: string
}

// ‚ö†Ô∏è √âviter (type alias)
type Software = {
  id: string
  name: string
}
```

#### Variables inutilis√©es
```typescript
// ‚úÖ Correct (pr√©fixe underscore pour ignorer)
function example(_unusedParam: string, data: number) {
  return data * 2
}

// ‚ùå Incorrect (variable inutilis√©e)
function example(unusedParam: string, data: number) {
  return data * 2
}
```

#### Type `any`
```typescript
// ‚ö†Ô∏è Warning (√† √©viter si possible)
function process(data: any) {
  return data
}

// ‚úÖ Correct (type sp√©cifique)
function process(data: Software) {
  return data
}
```

### R√®gles g√©n√©rales

#### D√©claration de variables
```typescript
// ‚úÖ Correct
const PI = 3.14159
let counter = 0

// ‚ùå Incorrect
var PI = 3.14159
```

#### Const vs Let
```typescript
// ‚úÖ Correct (const pour valeurs non r√©assign√©es)
const name = "Kahoot!"
let counter = 0
counter++

// ‚ùå Incorrect (let pour valeur constante)
let name = "Kahoot!"
```

#### Template literals
```typescript
// ‚úÖ Correct
const message = `Bonjour ${name}`
const url = `${baseURL}/api/software`

// ‚ö†Ô∏è √âviter
const message = "Bonjour " + name
```

#### Console et Debugger
```typescript
// ‚úÖ En d√©veloppement (autoris√©)
console.log("Debug info")
debugger

// ‚ö†Ô∏è En production (warning)
console.log("This will warn in production")

// ‚ùå En production (erreur)
debugger // Erreur en production
```

## üõ†Ô∏è Commandes

### V√©rifier le code
```bash
npm run lint
```

### Corriger automatiquement
```bash
npm run lint -- --fix
# ou
npx eslint . --fix
```

### V√©rifier les types TypeScript
```bash
npm run typecheck
```

## üìù Configuration dans les √©diteurs

### VS Code
Ajouter dans `.vscode/settings.json` :
```json
{
  "editor.formatOnSave": false,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
  },
  "eslint.validate": [
    "javascript",
    "javascriptreact",
    "typescript",
    "typescriptreact",
    "vue"
  ]
}
```

### WebStorm / IntelliJ
1. Settings ‚Üí Languages & Frameworks ‚Üí JavaScript ‚Üí Code Quality Tools ‚Üí ESLint
2. Cocher "Automatic ESLint configuration"
3. Cocher "Run eslint --fix on save"

## üîß Personnalisation

La configuration se trouve dans `eslint.config.mjs`. Pour modifier une r√®gle :

```javascript
export default withNuxt({
  rules: {
    // D√©sactiver une r√®gle
    "@stylistic/quotes": "off",
    
    // Changer en warning
    "@typescript-eslint/no-explicit-any": "warn",
    
    // Modifier les options
    "@stylistic/indent": ["error", 4] // 4 espaces au lieu de 2
  }
})
```

## üìö Ressources

- [ESLint Rules](https://eslint.org/docs/rules/)
- [Nuxt ESLint](https://eslint.nuxt.com/)
- [ESLint Stylistic](https://eslint.style/)
- [Vue ESLint Plugin](https://eslint.vuejs.org/)
- [TypeScript ESLint](https://typescript-eslint.io/)
